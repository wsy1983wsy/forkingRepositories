# 工作内容
## 数据库
1. 线程安全 ok
2. 使用方法示例 ok

## 网络
1. retrofit ok
2. 接口测试 ok
3. 下载进度提示 ok
4. 上传进度提示 ok
5. 串行执行请求 ok

## rxjava
1. rxbus ok
2. 界面接收与处理 ok
3. 事件 ok

## webview与native交互
使用cordova。ok

## push
第三方，具体显示需要有协议，根据push内容确定如何显示。 ok

### 融云
#### sdk支持
支持ios，android。服务器提供http接口，提供服务器的java版sdk。[服务器api网址](http://www.rongcloud.cn/docs/server.html)
#### 消息发送限制
公有云支持发送1,000 万条／日。

#### 在线用户限制
无，无超出限制策略。

#### 离线唤醒
融云 SDK 根据 Android App 运行的特性，主要有以下三种运行状态：<br>
1. 前台状态：如字面意思，App 前台可见时 SDK 处于前台状态。此时 App 使用融云的长连接通道来收发消息。
这种情况下，因为已经收到了实时的消息，您的 App 不会收到推送。<br>
2. 后台活动状态：当 App 进入后台 3 分钟之内，SDK 处于后台活跃状态。此时 App 使用融云的长连接通道接收消息。
如果您使用 IMKit，此时 SDK 收到消息会弹出本地通知（必须实现用户信息提供者和群组信息提供者，否则将不会有本地通知提示弹出）。
如果您使用 IMLib，由于 IMLib 是不带界面功能的 SDK，因此需要您自己根据消息回调来在本地弹出通知提示。
在这种情况下，您收到的还是实时消息，并不是推送。<br>
3. 后台暂停状态：当 App 的主进程被杀死或者回收后，或者您主动调用 disconnect() 跟融云断开连接后。此时，融云会通过一个后台服务保持一条推送长连接，跟融云服务器保持连接，我们称之为 Push 连接通道。
在这种情况下，你会收到实时的推送。推送的内容是包含消息内容的数据。<br>
为了提高推送到达率，融云建议您集成小米推送。在小米系统上，推送到达率可以达到 100%。在非小米系统上，仍将继续使用融云自有的推送服务。融云通过官方服务保证了消息的实时到达。在集成小米推送之后，推送整体到达率可以达到 70% 以上，远远超过各类第三方推送。<br>
关于自启动。目前 Android 手机支持这样一个设置，如果是打开了自启动权限的 App，可以被后台保活服务唤醒。而关闭了自启动权限的 App，即使推送服务收到了推送，仍然不能唤醒 App。微信、QQ 等 App 之所以可以有持续稳定的推送通知，是因为在各类手机上都给他们打开了白名单。如果 App 打开了自启动，融云具备跟微信、QQ 同等的推送能力。<br>
必须自己接入小米推送和华为推送。

#### 别名
每一个用户有一个userId，通过userId等参数可以获取用户的token。

#### tag
一个用户最多添加 20 个标签，每个 tags 最大不能超过 40 个字节。

#### 限制

1. 检查用户在线状态，每秒钟限 100 次
2. 封禁状态，黑名单，信息都是每秒钟100次
3. 单聊消息，每分钟6000条消息，每次最多1000人，如果一次发1000人，则为1000条消息
4. 系统消息，每秒钟最多100条消息，每次最多100人，一次发100人，则为100条消息。
5. 群组消息，每秒钟最多20条消息，每次最多3个群组，一次向3个群组发，则为3条。
6. 群组，一个用户最多可胶乳500个群，每个群最大可以有3000人。

#### 推送广播和push限制
推送和广播消息合计每小时只能发送 1 次，每天最多发送 3 次。 广播和推送可以根据用户id，tag进行发送。不过次数太少。可以考虑使用发送群组消息的形式发送。

#### 如何使用推送
##### 集成sdk
参考[融云的Android推送开发指南](http://www.rongcloud.cn/docs/android_push.html)。

> 需要自己去注册小米推送和华为推送

### 云巴
#### sdk支持
支持ios，android。服务器提供[RESTful接口](https://yunba.io/docs/restful_api_api_manual)

#### 消息发送限制
基本版，每月100万次免费api请求，每月100万次免费推送，速度限制20次/秒。
#### 在线用户限制
无
#### 唤醒
华为和小米使用其本身的push，其他的使用云巴。参考[云巴第三方推送集成指南](https://yunba.io/docs/android_sdk_third_part_push)
#### 离线消息处理
接收方的客户端当前不在线的话，消息会暂存在云巴的服务器（多达 50 条，长达 15 天），等到客户端连网时会收到云巴服务器发来的离线消息，客户端收到后，服务器才会删除之前保存的消息。<br>
通过设置 time_to_live 参数，可以控制离线消息在云巴的服务器上保留多久。 另外，每个 Topic 的离线消息数量最多不超过 50 条。<br>
可参考[云巴的离线消息](https://yunba.io/docs/product_kb_offline_message)。重新上线后可以收到消息。加入白名单后可以自动起来,参考[小米，华为手机自启动设置](https://yunba.io/docs/android_sdk_third_part_push)。
#### 别名
每个应用的每个设备一个别名，一对一。
#### tag
无tag概念，由于云巴基于mqtt，可以定于频道，相当于定义有tag，频道数目不限。频道相当于群聊。<br>

### jpush

#### sdk支持
支持ios，android。服务器提供[RESTful接口](http://docs.jiguang.cn/jpush/server/push/server_overview/)，但是接口使用频率有限制。

#### 消息发送限制
基本版，消息数和用户数无限制，但是共享二十万条/秒的提交速度。
#### 在线用户限制
无
#### 唤醒
需要手动设置app在信任程序列表中，否则无法保证程序的保活，参考[jpush Android SDK 调试指南](http://docs.jiguang.cn/jpush/client/Android/android_debug_guide/)。
#### 离线消息处理
当前默认支持 5 条离线消息。如有特殊需求需要更多，请联系商务提出需求。<br>
离线消息默认的保留时长是 1 天。API 2.0 提供一个 time_to_live 字段，允许调用推送消息时，设置保留的时长。以秒为单位。如果为 0 表示不保留离线消息，即只对在线的用户推送消息。最长为 10 天。<br>
#### 别名
每个应用的每个设备一个别名，一对一。
#### tag
每个用户可以有多个tag。

### 建议
推荐使用云巴，1：消息按照次数限制，每次不限制目标数目，2：最新版已经集成了小米和华为push，能够保证更高的消息到达率。离线消息保存时间长，条数多。3：无tag限制。4：jpush和融云都存在重启后和杀进程后无法重启问题<br>
push内容格式：

```javascript
{
    type:消息类型,
    content:通知栏消息内容，
    showTitle：对话框显示的标题，
    showMsg：对话框显示的内容，
    ....
}
type:标识消息的类型，比如：1:表示该消息是一个静默类型，客户端收到push之后只做一个默认的操作，2：标识该消息需要在通知栏显示，content为通知栏中的内容，3：显示一个对话框，showTitle为对话框的标题，showMsg对话框的内容。
```

## bugly
腾讯bugly集成。ok<br>
可以收集bug，内测版升级。

## 通用功能

1. 图片处理，图片的压缩处理，满足上传需求。 ok
2. 图片显示，获取当前显示的图片，考虑使用glide ok
3. 工具类,部分实现，需要根据需要慢慢补充 ok
4. 二维码 ok
5. 拍照  ok
6. pdf ok

## CMS 内容管理
需要协议，用于显示不同的内容，比如欢迎页显示方式等。

## 皮肤
1. 根据服务器配置显示不同的皮肤

## 热更新以及bug修复
1. bug修复
2. 热更新

## MAM
参考appcan